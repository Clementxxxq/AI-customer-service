# æ—¥å†é€‰æ‹©åŠŸèƒ½å®ç°å®Œæˆ âœ…

å·²ç»å®Œæˆä¸€ä¸ªå®Œæ•´çš„**æ—¥å†æ—¶é—´é€‰æ‹©ç³»ç»Ÿ**ï¼éµå¾ªæ‚¨æ¨èçš„æ¶æ„ï¼š

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
å®¢æˆ·          â†’     å‰ç«¯               â†’     AI åç«¯          â†’     æ•°æ®åº“
  â†“                   â†“                      â†“                       â†“
è¾“å…¥é¢„çº¦      â†’    å¤„ç†äº¤äº’            â†’    ç”Ÿæˆå¯é¢„çº¦      â†’    æŸ¥è¯¢å½“å‰
ä¿¡æ¯            â†’    æ˜¾ç¤ºæ—¥å†            â†’    æ—¶é—´ JSON         â†’    é¢„çº¦æƒ…å†µ
              â†’    ä¼ è¾“æ—¥æœŸæ—¶é—´        â†’    æ¨èæ—¶é—´
```

### âœ… åç«¯æ”¹è¿›ï¼ˆAI = å¤§è„‘ï¼‰

#### 1. **æ—¶é—´æ§½ç”ŸæˆæœåŠ¡** [`backend/services/availability_service.py`](backend/services/availability_service.py)
- `get_available_dates()` - ç”Ÿæˆå¯é¢„çº¦æ—¥æœŸåˆ—è¡¨
- `get_suggested_appointment()` - AI æ¨èæœ€ä½³æ—¶é—´
- è‡ªåŠ¨è·³è¿‡å‘¨æœ«
- 30 åˆ†é’Ÿæ—¶é—´æ§½
- ä¼˜é›…å¤„ç†æ•°æ®åº“é”™è¯¯

#### 2. **æ•°æ®æ¨¡å‹æ‰©å±•** [`backend/schemas/chat.py`](backend/schemas/chat.py)
æ–°å¢æ¨¡å‹ï¼š
```python
class TimeSlotInfo:
    date: str              # "2026-01-10"
    day_of_week: str       # "Friday"
    slots: List[str]       # ["09:00", "09:30", "10:00", ...]

class AppointmentAvailability:
    available_dates: List[TimeSlotInfo]
    suggested: AvailableAppointmentTime  # AI æ¨è
```

#### 3. **Chat API è¿”å›æ ¼å¼** [`backend/routes/chat.py`](backend/routes/chat.py)
å½“ç”¨æˆ·è¯·æ±‚é¢„çº¦æ—¶ï¼Œè¿”å›ï¼š
```json
{
  "intent": "appointment",
  "bot_response": "è¿™æ˜¯æˆ‘ä»¬çš„å¯ç”¨æ—¶é—´...",
  "availability": {
    "available_dates": [
      {
        "date": "2026-01-10",
        "day_of_week": "Friday",
        "slots": ["09:00", "09:30", "10:00", "14:00", "14:30"]
      },
      {
        "date": "2026-01-11",
        "day_of_week": "Saturday",
        "slots": ["10:00", "11:00", "15:00"]
      }
    ],
    "suggested": {
      "date": "2026-01-10",
      "time": "10:00"
    }
  }
}
```

### âœ… å‰ç«¯æ”¹è¿›ï¼ˆå‰ç«¯ = æ‰‹è„šï¼‰

#### 1. **æ—¥å†é€‰æ‹©ç»„ä»¶** [`frontend/components/CalendarPicker.tsx`](frontend/components/CalendarPicker.tsx)
ç‰¹ç‚¹ï¼š
- æ—¥æœŸåˆ—è¡¨è§†å›¾ï¼ˆæ˜“äºç§»åŠ¨è®¾å¤‡ï¼‰
- æ˜¾ç¤ºæ¯ä¸ªæ—¥æœŸçš„å¯ç”¨æ—¶æ§½æ•°
- é«˜äº®é€‰ä¸­çš„æ—¥æœŸ
- 30 åˆ†é’Ÿæ—¶é—´é—´éš”æŒ‰é’®
- æ˜¾ç¤º AI æ¨èæ—¶é—´
- å“åº”å¼è®¾è®¡

#### 2. **æ ·å¼æ–‡ä»¶** [`frontend/components/CalendarPicker.css`](frontend/components/CalendarPicker.css)
- ç°ä»£åŒ–çš„ UI è®¾è®¡
- ç½‘æ ¼å¸ƒå±€æ˜¾ç¤ºæ—¶é—´æ§½
- ç§»åŠ¨ç«¯é€‚é…

#### 3. **èŠå¤©ç»„ä»¶é›†æˆ** [`frontend/components/MessageList.tsx`](frontend/components/MessageList.tsx)
- åœ¨ AI æ¶ˆæ¯ä¸‹æ˜¾ç¤ºæ—¥å†
- æ”¯æŒæ—¶é—´æ§½é€‰æ‹©å›è°ƒ

#### 4. **ä¸»èŠå¤©é€»è¾‘** [`frontend/components/DentalChat.tsx`](frontend/components/DentalChat.tsx)
- å¤„ç†ç”¨æˆ·çš„æ—¥å†é€‰æ‹©
- è‡ªåŠ¨è½¬æ¢ä¸ºé¢„çº¦è¯·æ±‚å‘é€å›åç«¯

#### 5. **ä¾èµ–åº“** [`frontend/package.json`](frontend/package.json)
```json
{
  "react-day-picker": "^8.9.1",
  "date-fns": "^2.30.0"
}
```

## ğŸ”„ å®Œæ•´æµç¨‹

```
ç”¨æˆ·: "æˆ‘æƒ³é¢„çº¦æ´—ç‰™"
  â†“
åç«¯ (Llama): è§£ææ„å›¾ = "appointment"
  â†“
åç«¯æ£€æŸ¥: éœ€è¦æ›´å¤šä¿¡æ¯ï¼ˆç¼ºå°‘æ—¶é—´ï¼‰
  â†“
åç«¯ç”Ÿæˆ: å¯é¢„çº¦æ—¶é—´ JSON
  â†“
è¿”å›ç»™å‰ç«¯:
{
  "bot_response": "è¯·é€‰æ‹©æ‚¨å–œæ¬¢çš„æ—¶é—´",
  "availability": { ... }
}
  â†“
å‰ç«¯: æ˜¾ç¤ºæ—¥å† ğŸ“…
ç”¨æˆ·ç‚¹å‡»: 2026-01-10 at 10:00
  â†“
å‰ç«¯å‘é€: "I'd like to book at 10:00 on 2026-01-10"
  â†“
åç«¯: ç¡®è®¤é¢„çº¦ âœ…
```

## ğŸ“Š å…³é”®ç‰¹ç‚¹

| æ–¹é¢ | è®¾è®¡ |
|------|------|
| **AI èŒè´£** | ç†è§£æ„å›¾ + è¿”å›å¯é¢„çº¦æ—¶é—´ JSON |
| **å‰ç«¯èŒè´£** | æ¸²æŸ“æ—¥å† + å¤„ç†ç”¨æˆ·äº¤äº’ |
| **æ•°æ®æµ** | åç«¯ â†’ JSON â†’ å‰ç«¯ UI |
| **ç”¨æˆ·ä½“éªŒ** | ç‚¹å‡»æ—¥æœŸ â†’ ç‚¹å‡»æ—¶é—´ â†’ ç¡®è®¤é¢„çº¦ |
| **ç§»åŠ¨é€‚é…** | âœ… å“åº”å¼è®¾è®¡ |
| **æ— éšœç¢** | âœ… æ¸…æ™°çš„æŒ‰é’®æ ‡ç­¾ |

## ğŸš€ ä¸‹ä¸€æ­¥

åç«¯å·²å®Œå…¨å‡†å¤‡å¥½ï¼ç°åœ¨åªéœ€è¦ï¼š

1. **å®‰è£…ä¾èµ–**ï¼ˆå‰ç«¯ï¼‰
```bash
cd frontend
npm install
```

2. **è¿è¡Œåç«¯**
```bash
cd backend
python main.py
```

3. **è¿è¡Œå‰ç«¯**
```bash
cd frontend  
npm run dev
```

4. **æµ‹è¯•æµç¨‹**
- åœ¨èŠå¤©ä¸­è¯´ï¼š"æˆ‘æƒ³é¢„çº¦æ´—ç‰™"
- çœ‹åˆ°æ—¥å†æ˜¾ç¤º
- é€‰æ‹©æ—¥æœŸå’Œæ—¶é—´
- é¢„çº¦ç¡®è®¤

## âœ¨ æ¶æ„ä¼˜åŠ¿

âœ… **å…³æ³¨åˆ†ç¦»** - AI å’Œ UI ç‹¬ç«‹  
âœ… **æ˜“äºæ‰©å±•** - ä¿®æ”¹æ—¶é—´æ§½é€»è¾‘ä¸å½±å“ UI  
âœ… **ä¸“ä¸š** - éµå¾ªè¡Œä¸šæ ‡å‡†  
âœ… **æ˜“æµ‹è¯•** - åç«¯ç‹¬ç«‹è¿”å› JSON  
âœ… **ç§»åŠ¨å‹å¥½** - å“åº”å¼è®¾è®¡  
âœ… **å¯è®¿é—®** - æ¸…æ™°çš„ UI æ ‡ç­¾  

è¿™å°±æ˜¯æ­£ç¡®çš„åšæ³•ï¼ğŸ¯
